<!doctype html><html lang=en-us><head><title>Disposable development environments with gitpod</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="how to setup a new gitpod disposable development environment for running a hugo powered blog"><meta name=author content="Matthias KÃ¶ster"><meta property="og:title" content="Disposable development environments with gitpod"><meta property="og:description" content="how to setup a new gitpod disposable development environment for running a hugo powered blog"><meta property="og:type" content="article"><meta property="og:url" content="https://katmatt.github.io/posts/disposable-development-environments/"><meta property="article:published_time" content="2020-10-31T15:35:10+02:00"><meta property="article:modified_time" content="2020-10-31T15:35:10+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Disposable development environments with gitpod"><meta name=twitter:description content="how to setup a new gitpod disposable development environment for running a hugo powered blog"><meta name=generator content="Hugo 0.68.3"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin=anonymous><link rel=stylesheet href=https://katmatt.github.io/fontawesome/css/all.min.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"><link rel=stylesheet type=text/css href=/css/styles.css></head><body><div id=container><header><h1><a href=/>katmatt blogs</a></h1><ul id=social-media><li><a href=https://github.com/katmatt title=GitHub><i class="fab fa-github fa-lg"></i></a></li><li><a href=https://twitter.com/matthiaskoester title=Twitter><i class="fab fa-twitter fa-lg"></i></a></li><li><a href=https://linkedin.com/in/matthias-k%c3%b6ster-12159636 title=LinkedIn><i class="fab fa-linkedin fa-lg"></i></a></li></ul></header><nav><ul></ul></nav><main><article><h1>Disposable development environments with gitpod</h1><aside><ul><li><time class=post-date datetime=2020-10-31T15:35:10+02:00>Oct 31, 2020</time></li><li>Categories:
<em><a href=/categories/programming>programming</a></em></li><li><em><a href=/tags/cloud>#cloud</a>
,
<a href=/tags/development-environment>#development-environment</a></em></li><li>4 minutes read</li></ul></aside><p>This blog post is completely written in a web browser running <a href=http://gitpod.io>gitpod</a>, which allows you to setup your
development environment in the cloud. And you can try it out yourself by following this link: <a href=https://gitpod.io/#https://github.com/katmatt/katmatt-blogs>katmatt/katmatt-blogs</a>.</p><p>If you click that link, it will open up the github project for my blog, start a <a href=https://gohugo.io/>hugo</a> server and offers you to open a preview of my blog:<figure><img src=gitpod-inception.png></figure>This feels a bit like in the movie <a href=https://en.wikipedia.org/wiki/Inception>inception</a>, where the protagonists travel from a dream to another dream. And on each level the time slows down.</p><p>The difference in this simile is that using gitpod accelerates your work: If you have to work on a bug fix on an old version of your project, gitpod will make sure that your development environment is set up as it was configured for that version/git ref of your project!</p><p>It feels like inception especially in the screenshot above: it shows you the preview of this blog post while I&rsquo;m writing it in gitpod.
I still have to get my head around it and especially working with an editor/IDE running in my web browser still feels a bit strange to me.</p><h1 id=how-does-it-work>How does it work?</h1><p>You can open up any project that is hosted either on <a href=https://about.gitlab.com/>gitlab</a>, <a href=http://github.com>github</a> or <a href=https://bitbucket.org/>bitbucket</a>
by adding the repository url to the following gitpod url <code>https://gitpod.io/#&lt;YOUR_GIT_REPO_URL></code>.</p><p>And that&rsquo;s just the beginning: If you use this link for the first time, gitpod will open a wizard that helps you to setup your development environment. When you used the link to my blogs gitpod development environment, then gitpod already started a development environment for you that contains everything to write a blog post.</p><h1 id=what-is-a-development-environment>What is a development environment?</h1><p>I normally write my blog post on my laptop that runs ubuntu linux. I use hugo to generate my
blog from markdown files and I use github actions to publish my finalized blog to github pages: <a href=https://github.com/katmatt/katmatt-blogs/blob/master/.github/workflows/main.yml>katmatt-blogs/.github/workflows/main.yml</a>.</p><p>That means that I already set up a continuous integration build to automate everything.
But what&rsquo;s missing is a setup of my local development environment. In the case of my blog, it&rsquo;s relatively simple because I can install hugo with one command. But in a typical SW development project, I would have to setup multiple tools to build the project locally. And this setup is typically written down in prose in a readme file, needs to be updated manually, and tends to be outdated very quickly. It would be much easier if this description would be machine-readable and if a machine could precisely provision the same development environment for each team member.</p><h1 id=disposable-development-environments-with-gitpod>Disposable development environments with gitpod</h1><p>And that&rsquo;s what gitpod offers: It runs your development environment in the cloud. The gitpod team calls this concept disposable development environments.</p><p>And to setup such a development environment with gitpod, you have to describe your development environment in a <code>.gitpod.yml</code> file located in the root of your project.
And this <code>.gitpod.yml</code> file looks like this for my blog:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#66d9ef>image</span>: klakegg/hugo:<span style=color:#ae81ff>0.68.3</span>-ext-alpine
<span style=color:#66d9ef>tasks</span>:
  - <span style=color:#66d9ef>command</span>: hugo server --baseUrl $(gp url <span style=color:#ae81ff>1313</span>) --liveReloadPort=<span style=color:#ae81ff>443</span> --appendPort=<span style=color:#66d9ef>false</span>
</code></pre></div><p>The first line specifies the docker image that contains hugo. And on the following line, I define the task to run
when opening my development environment. And for my blog I just need to run the hugo server command to be able to see a preview of my blog in gitpod.
This command is a bit more complex because we have to call the gitpod CLI tool <code>gp</code> to get the url where our hugo server is running and because gitpod
uses https for serving the content, we also have to set the <code>liveReloadPort</code> argument.</p><h1 id=conclusion>Conclusion</h1><p>My small example just scratches the surface of what gitpod offers. And the gitpod team developed their awesome product by using gitpod themselves -
an idea that is very common for SW tool companies and is called <a href=https://en.wikipedia.org/wiki/Eating_your_own_dog_food>eating your own dog food</a>.</p><p>And they shared how they develop gitpod in gitpod in this great video:<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/dFMpXUsJcGM style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div></p><p>Although I initially had some issues with having my IDE in the browser, I now see a lot of potential: Our team reviews pull request on github by using the builtin diff view. And I seldomly checkout a PR branch, although it would provide much more context. Imagine you just click a link and then the development environment for that branch/PR immediately opens in your browser. And you can navigate the source code, run tests and may even be able to run the system under development.</p><p>gitpod is a game-changer and I highly recommend you to give it a try yourself!</p></article><section class=post-nav><ul><li><a href=https://katmatt.github.io/posts/full-stack-tracing-with-javascript/><i class="fa fa-chevron-circle-left"></i>Full-stack distributed tracing with JavaScript</a></li></ul></section><section id=utterances></section><script>if(window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches){let s=document.createElement("script");s.setAttribute("repo","katmatt\/katmatt-blogs");s.src="https://utteranc.es/client.js";s.setAttribute("issue-term","pathname");document.getElementById("utterances").innerHTML="";document.getElementById("utterances").appendChild(s);}else{let s=document.createElement("script");s.setAttribute("repo","katmatt\/katmatt-blogs");s.src="https://utteranc.es/client.js";s.setAttribute("issue-term","pathname");document.getElementById("utterances").innerHTML="";document.getElementById("utterances").appendChild(s);}</script></main><footer><h6>|
Rendered by <a href=https://gohugo.io title=Hugo>Hugo</a> |
<a href=https://katmatt.github.io/index.xml>Subscribe</a></h6></footer></div><script src=/js/scripts.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-173228040-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>